# ë…¸ë˜ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„

## 1. ê°œìš”

ë…¸ë˜ë°© ìƒí™©ì— ë§ëŠ” ë…¸ë˜ë¥¼ ì¶”ì²œí•˜ê¸° ìœ„í•œ **íƒœê·¸ ê¸°ë°˜ ê°€ì¤‘ì¹˜ ìŠ¤ì½”ì–´ë§ ì•Œê³ ë¦¬ì¦˜**ì…ë‹ˆë‹¤.

## 2. íƒœê·¸ ì‹œìŠ¤í…œ

### 2.1 íƒœê·¸ êµ¬ì¡°

ê° ë…¸ë˜ëŠ” ë‹¤ìŒ íƒœê·¸ë¥¼ ê°€ì§‘ë‹ˆë‹¤:

```javascript
{
  title: "ê³¡ ì œëª©",
  artist: "ê°€ìˆ˜",
  tags: {
    mood: ["energetic", "fun"],      // ë¶„ìœ„ê¸° (ë³µìˆ˜ ê°€ëŠ¥)
    difficulty: "easy",              // ë‚œì´ë„ (ë‹¨ì¼)
    groupSize: ["duo", "group"],     // ì¸ì› ì í•©ë„ (ë³µìˆ˜ ê°€ëŠ¥)
    timeSlot: ["evening", "night"],  // ì‹œê°„ëŒ€ (ë³µìˆ˜ ê°€ëŠ¥)
    situation: ["opening", "heating"] // ìƒí™© (ë³µìˆ˜ ê°€ëŠ¥)
  }
}
```

### 2.2 íƒœê·¸ ì¢…ë¥˜

| ì¹´í…Œê³ ë¦¬ | íƒœê·¸ | ì„¤ëª… |
|---------|------|------|
| **mood** | energetic | ì‹ ë‚˜ëŠ” |
| | calm | ì”ì”í•œ |
| | fun | ì¬ë¯¸ìˆëŠ” |
| | emotional | ê°ì„±ì ì¸ |
| **difficulty** | easy | ì‰¬ì›€ (ëˆ„êµ¬ë‚˜ ê°€ëŠ¥) |
| | medium | ë³´í†µ |
| | hard | ì–´ë ¤ì›€ (ì‹¤ë ¥ í•„ìš”) |
| **groupSize** | solo | í˜¼ì ë¶€ë¥´ê¸° ì¢‹ìŒ |
| | duo | ë‘˜ì´ì„œ (ë“€ì—£) |
| | group | ì—¬ëŸ¿ì´ì„œ (ë–¼ì°½) |
| **timeSlot** | evening | ì €ë… (6-9ì‹œ) |
| | night | ë°¤ (9-12ì‹œ) |
| | dawn | ìƒˆë²½ (12ì‹œ ì´í›„) |
| **situation** | opening | ì²« ê³¡ / ì”ì”í•˜ê²Œ |
| | heating | ì‹ ë‚˜ê²Œ ë„ìš°ê¸° |
| | mood_change | í¥ê²¨ìš´ ë–¼ì°½ / ë¶„ìœ„ê¸° ì „í™˜ |
| | closing | ê°ì„± ì¶©ì „ / ë§ˆë¬´ë¦¬ |

### 2.3 ë°ì´í„° ì»¤ë²„ë¦¬ì§€
- ë…¸ë˜ DBëŠ” ëŒ„ìŠ¤/ë°œë¼ë“œë¿ ì•„ë‹ˆë¼ **R&B, í™í•©/ë©** ê³¡ë„ í¬í•¨í•©ë‹ˆë‹¤.
- ì¥ë¥´ëŠ” ë³„ë„ íƒœê·¸ë¡œ ë¶„ë¦¬í•˜ì§€ ì•Šê³  ë¶„ìœ„ê¸°/ìƒí™© íƒœê·¸ë¡œ ì¶”ì²œì— ë°˜ì˜í•©ë‹ˆë‹¤.
- í˜„ì¬ **70ê³¡ ì´ìƒ**ì˜ ë…¸ë˜ ë°ì´í„°ë² ì´ìŠ¤ ë³´ìœ 

## 3. ì•± UI í”Œë¡œìš°ì™€ ë§¤í•‘

### 3.1 ë¶„ìœ„ê¸° í™”ë©´ â†’ situation ë§¤í•‘

| UI ì„ íƒ | situation ê°’ | ì„¤ëª… |
|---------|-------------|------|
| ğŸ”¥ ì‹ ë‚˜ê²Œ ë„ìš°ê¸° | `heating` | í…ì…˜ UP ê³¡ |
| ğŸµ ì”ì”í•˜ê²Œ | `opening` | í¸ì•ˆí•œ ë¶„ìœ„ê¸° |
| ğŸ’œ ê°ì„± ì¶©ì „ | `closing` | ë°œë¼ë“œ ë¶„ìœ„ê¸° ì „í™˜ |
| ğŸ‰ í¥ê²¨ìš´ ë–¼ì°½ | `mood_change` | ë‹¤ ê°™ì´ ë”°ë¼ë¶€ë¥´ëŠ” ê³¡ |

### 3.2 ìë¦¬ ìœ í˜• â†’ atmosphere ë§¤í•‘

| UI ì„ íƒ | atmosphere ê°’ | ì„ í˜¸ mood |
|---------|--------------|----------|
| ğŸ’¼ ì§ì¥ ëª¨ì„ | `íšŒì‹` | energetic, fun |
| ğŸ‘¯ ì¹œêµ¬ ëª¨ì„ | `ì¹œêµ¬ëª¨ì„` | fun, energetic |
| ğŸ’• ì—°ì¸Â·ê°€ì¡± | `ì»¤í”Œ` | calm, emotional |
| ğŸ‚ íŠ¹ë³„í•œ ë‚  | `ì¶•í•˜ìë¦¬` | energetic, fun |

### 3.3 ì¸ì› ì„ íƒ â†’ groupSize ë§¤í•‘

| UI ì„ íƒ | groupSize ê°’ |
|---------|-------------|
| ğŸ§‘ í˜¼ì | `solo` |
| ğŸ‘« 2ëª… | `duo` |
| ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ 3ëª…+ | `group` |

## 4. ìŠ¤ì½”ì–´ë§ ì•Œê³ ë¦¬ì¦˜

### 4.1 ê°€ì¤‘ì¹˜ ì„¤ì •

```
ìƒí™©(situation)  : 40ì  - ê°€ì¥ ì¤‘ìš”
ë¶„ìœ„ê¸°(mood)     : 25ì  - ëª¨ì„ ì„±ê²©ì— ë§ëŠ” ê³¡
ì¸ì›(groupSize)  : 20ì  - ë¶€ë¥´ê¸° ì í•©í•œ ì¸ì›
ì‹œê°„ëŒ€(timeSlot) : 15ì  - ì‹œê°„ëŒ€ ë¶„ìœ„ê¸°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ìµœëŒ€ ì ìˆ˜        : 100ì  + ë³´ë„ˆìŠ¤
```

### 4.2 ì ìˆ˜ ê³„ì‚° ë¡œì§

```javascript
function calculateScore(song, userSelection) {
  let score = 0;

  // 1. ìƒí™© ë§¤ì¹­ (40ì )
  if (song.tags.situation.includes(userSelection.situation)) {
    score += 40;
  }

  // 2. ë¶„ìœ„ê¸° ë§¤ì¹­ (25ì )
  const preferredMoods = getPreferredMoods(userSelection.atmosphere);
  const matchRatio = countMatches(song.tags.mood, preferredMoods) / preferredMoods.length;
  score += matchRatio * 25;

  // 3. ì¸ì› ë§¤ì¹­ (20ì )
  if (song.tags.groupSize.includes(userSelection.groupSize)) {
    score += 20;
  }

  // 4. ì‹œê°„ëŒ€ ë§¤ì¹­ (15ì )
  if (song.tags.timeSlot.includes(userSelection.timeSlot)) {
    score += 15;
  }

  // 5. ë³´ë„ˆìŠ¤: ë‚œì´ë„
  if (song.tags.difficulty === 'easy') score += 5;
  else if (song.tags.difficulty === 'medium') score += 2;

  return score;
}
```

### 4.3 ë¶„ìœ„ê¸°ë³„ ì„ í˜¸ mood

| ëª¨ì„ ì„±ê²© | ì„ í˜¸ mood | ì´ìœ  |
|----------|----------|------|
| íšŒì‹ | energetic, fun | ë¶„ìœ„ê¸° ë„ìš°ê¸° |
| ì¹œêµ¬ëª¨ì„ | fun, energetic | ì‹ ë‚˜ê²Œ ë†€ê¸° |
| ì»¤í”Œ | calm, emotional | ë¡œë§¨í‹±í•œ ë¶„ìœ„ê¸° |
| ì¶•í•˜ìë¦¬ | energetic, fun | ì¶•ì œ ë¶„ìœ„ê¸° |

## 5. ì¶”ì²œ í”„ë¡œì„¸ìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì‚¬ìš©ì ì„ íƒ  â”‚  situation, groupSize, atmosphere, genderRatio
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ì ìˆ˜ ê³„ì‚°    â”‚  ëª¨ë“  ê³¡ì— ëŒ€í•´ ìŠ¤ì½”ì–´ ê³„ì‚°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. í•„í„°ë§       â”‚  ìµœì†Œ ì ìˆ˜(20ì ) ì´ìƒë§Œ ì„ íƒ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ìƒìœ„ ì¶”ì¶œ    â”‚  ìƒìœ„ 15ê³¡ ì¶”ì¶œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ëœë¤ ì…”í”Œ    â”‚  Fisher-Yates ì•Œê³ ë¦¬ì¦˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. ê²°ê³¼ ë°˜í™˜    â”‚  ìƒìœ„ 5ê³¡ ì¶”ì²œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6. ë‹¤ì–‘ì„± í™•ë³´ ì „ëµ

### 6.1 ëœë¤ ì…”í”Œ
- ë‹¨ìˆœíˆ ì ìˆ˜ ìˆœìœ¼ë¡œ ì¶”ì²œí•˜ë©´ ë§¤ë²ˆ ê°™ì€ ê³¡ì´ ë‚˜ì˜´
- ìƒìœ„ 15ê³¡ ì¤‘ì—ì„œ ëœë¤ ì…”í”Œ í›„ 5ê³¡ ì„ íƒ
- "ğŸ”„ ë‹¤ì‹œ ì¶”ì²œë°›ê¸°" ë²„íŠ¼ìœ¼ë¡œ ë‹¤ë¥¸ ì¡°í•© ì œê³µ

### 6.2 Fisher-Yates ì•Œê³ ë¦¬ì¦˜
```javascript
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
```

## 7. ì‹œê°„ëŒ€ ìë™ ê³„ì‚°

ì•±ì—ì„œ í˜„ì¬ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ìë™ ì„¤ì •:

```javascript
getTimeSlot() {
    const hour = new Date().getHours();
    
    if (hour >= 18 && hour < 21) {
        return 'evening'; // ì €ë…
    } else if (hour >= 21 || hour < 6) {
        return 'night';   // ë°¤
    } else {
        return 'dawn';    // ìƒˆë²½/ë‚®
    }
}
```

## 8. ì˜ˆì‹œ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤: ì¹œêµ¬ëª¨ì„, ì‹ ë‚˜ê²Œ ë„ìš°ê¸°, 3ëª…+, ë°¤

**ì‚¬ìš©ì ì„ íƒ:**
- situation: `heating`
- groupSize: `group`
- atmosphere: `ì¹œêµ¬ëª¨ì„`
- timeSlot: `night` (ìë™)

**ë†’ì€ ì ìˆ˜ ì˜ˆì‹œ:**
| ê³¡ | ìƒí™© | ë¶„ìœ„ê¸° | ì¸ì› | ì‹œê°„ | ë‚œì´ë„ | ì´ì  |
|---|------|-------|-----|------|--------|-----|
| ë¿œë¿œ (ëª¨ëª¨ëœë“œ) | 40 | 25 | 20 | 15 | +5 | 105 |
| ê°•ë‚¨ìŠ¤íƒ€ì¼ (ì‹¸ì´) | 40 | 25 | 20 | 15 | +5 | 105 |
| Dynamite (BTS) | 40 | 25 | 20 | 15 | +2 | 102 |

## 9. í™•ì¥ ë°©í–¥

1. **ì‚¬ìš©ì í”¼ë“œë°± ë°˜ì˜**: ì¢‹ì•„ìš”/ì‹«ì–´ìš” â†’ ê°œì¸í™”
2. **ì—°ë„/ì„¸ëŒ€ í•„í„°**: 90ë…„ëŒ€, 2000ë…„ëŒ€, ìµœì‹ ê³¡ ë“±
3. **ì¥ë¥´ í•„í„°**: ë°œë¼ë“œ, ëŒ„ìŠ¤, R&B, í™í•© ë“± (UI/ì•Œê³ ë¦¬ì¦˜ í™•ì¥ í•„ìš”)
4. **ë‚œì´ë„ ì¡°ì ˆ**: "ì‰¬ìš´ ê³¡ë§Œ" ì˜µì…˜
5. **ë…¸ë˜ë°© ë²ˆí˜¸ ì—°ë™**: TJ, ê¸ˆì˜ ë²ˆí˜¸ í‘œì‹œ
6. **ì„±ë¹„ ë°˜ì˜**: ë‚¨ì´ˆ/ì—¬ì´ˆì— ë”°ë¥¸ ê°€ìˆ˜ ì„±ë³„ ê°€ì¤‘ì¹˜ (ë¯¸êµ¬í˜„)

## 10. ë°ì´í„° ê²€ì¦

ê°œë°œ ëª¨ë“œì—ì„œ íƒœê·¸ ê°’ì´ ì •ì˜ëœ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ ê²½ê³ ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤:

```javascript
if (import.meta.env.DEV) {
    const issues = validateSongs(SONGS_DATABASE);
    if (issues.length > 0) {
        console.warn(`[songs] íƒœê·¸ ê²€ì¦ ì´ìŠˆ:\n${issues.join('\n')}`);
    }
}
```
